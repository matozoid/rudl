<?xml version="1.0" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel=stylesheet type='text/css' href='rudl.css'>
<title>rudl_video_bitmask</title>
</head>
<body>
<a href='index.html'>Back to index</a>
<h1>Index</h1>
<p><p><a href='rudl_video_bitmask.html#label-0'>CollisionMap</a>
<p><a href='rudl_video_bitmask.html#label-1'>Class Methods</a>
<p>&nbsp;<a href='rudl_video_bitmask.html#label-2'>new</a>
&nbsp;<a href='rudl_video_bitmask.html#label-4'>collides_with</a>
&nbsp;<a href='rudl_video_bitmask.html#label-5'>destroy</a>
&nbsp;<a href='rudl_video_bitmask.html#label-6'>set</a>
&nbsp;<a href='rudl_video_bitmask.html#label-7'>unset</a>
&nbsp;<a href='rudl_video_bitmask.html#label-8'>[]</a>
&nbsp;<a href='rudl_video_bitmask.html#label-10'>size</a>


<h1><a name="label-0" id="label-0">CollisionMap</a></h1><!-- RDLabel: "CollisionMap" -->
<p>This code is "bitmask" from <a href="http://www.ifm.liu.se/~ulfek/projects/2d_Collision_Detection.html">&lt;URL:http://www.ifm.liu.se/~ulfek/projects/2d_Collision_Detection.html&gt;</a></p>
<p>This class contains a map of all the visible pixels in a surface.
(That's the ones that don't have the color key's color)
With it, you can detect whether any pixels in a surface and another
surface overlap when they are at two specific positions.</p>
<h2><a name="label-1" id="label-1">Class Methods</a></h2><!-- RDLabel: "Class Methods" -->
<dl>
<dt><a name="label-2" id="label-2"><code>CollisionMap#new( <var>surface</var> )</code></a></dt><!-- RDLabel: "CollisionMap#new" -->
<dt><a name="label-3" id="label-3"><code>CollisionMap#new( <var>size</var> )</code></a></dt><!-- RDLabel: "CollisionMap#new" -->
</dl>
<p>Creates a new collision map.</p>
<p>Supplying a Surface will create the map with the information from surface.
The map will not be automatically updated when the surface contents
change, so a new <code>CollisionMap</code> will have to be made each time.
The Surface's colorkey will be used to identify "uncollidable" area's.</p>
<p>Supplying a size array: [w, h] will create an empty bitmask of that size.</p>
<p>Surface has an attribute, <var>collision_map</var>, that you can use to attach
a <code>CollisionMap</code> to.
RUDL doesn't use that attribute for itself.
The syntax would be:</p>
<p>some_surface.collision_map=CollisionMap.new( some_surface )</p>
<dl>
<dt><a name="label-4" id="label-4"><code>CollisionMap#collides_with( <var>own_coord</var>, <var>other_map</var>, <var>other_coord</var> )</code></a></dt><!-- RDLabel: "CollisionMap#collides_with" -->
</dl>
<p>This returns the first found overlapping (colliding) pixel for two collision maps,
or nil if no collision occurred.
The coordinates specify where the two maps are, 
which will probably mean that the two surfaces are blitted to the screen at those coordinates.</p>
<p>If using the Surface#collision_map attribute, you would get for one surface at [10,10] and
another at [20,20]:
onesurface.collision_map( [10,10], other_surface.collision_map, [20,20] )</p>
<dl>
<dt><a name="label-5" id="label-5"><code>CollisionMap#destroy</code></a></dt><!-- RDLabel: "CollisionMap#destroy" -->
</dl>
<p>Removes the map from memory.
This instance of CollisionMap will be useless from this call on.</p>
<dl>
<dt><a name="label-6" id="label-6"><code>CollisionMap#set( <var>coord</var> )</code></a></dt><!-- RDLabel: "CollisionMap#set" -->
<dt><a name="label-7" id="label-7"><code>CollisionMap#unset( <var>coord</var> )</code></a></dt><!-- RDLabel: "CollisionMap#unset" -->
</dl>
<p>This fills and erases one point in the collision map,
in case you want to have collision with parts of a surface that
weren't color keyed, or you want parts of the surface to appear
"untouchable"</p>
<dl>
<dt><a name="label-8" id="label-8"><code>CollisionMap#[ <var>x</var>, <var>y</var> ]</code></a></dt><!-- RDLabel: "CollisionMap#[ x, y ]" -->
<dt><a name="label-9" id="label-9"><code>CollisionMap#[ <var>x</var>, <var>y</var> ]= <var>collidebit</var></code></a></dt><!-- RDLabel: "CollisionMap#[ x, y ]= collidebit" -->
</dl>
<p>The array operator accesses single points in the collision map,
in case you want to have collision with parts of a surface that
weren't color keyed, or you want parts of the surface to appear
"untouchable".</p>
<p>If collidebit is set to 0, no collision will be detected for that point.
If it is set to anything else, it will be set to 1 and collisions will
be checked at that point.</p>
<dl>
<dt><a name="label-10" id="label-10"><code>CollisionMap#size</code></a></dt><!-- RDLabel: "CollisionMap#size" -->
</dl>
<p>Returns an array of [width, height] of the collision map.</p>

<a href='index.html'>Back to index</a>
</body>
</html>